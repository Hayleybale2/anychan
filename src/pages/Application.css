@import "../styles/common";

.webpage {
	display: flex;
	/* For z-index ordering (relative to preloading screen). */
	/* Otherwise preloading screen will always be above content (even when it's not shown). */
	position: relative;
	z-index: 0;
}

/* Content takes all free space */
.webpage__content {
	position : relative;
	z-index  : 0;

	margin-top: var(--header-height);

	flex-shrink : 0;
	flex-grow   : 1;
	flex-basis  : auto;

	/* Is focusable (for keyboard navigation: page up, page down). */
	outline: none;

	@mixin m {
		display: flex;
		align-items: center;
		flex-direction: column;
	}
}

.webpage__content--regular {
	display: flex;
	align-items: center;
	flex-direction: column;
}

.webpage__main {
	flex: 1;
	display: flex;
	flex-direction: column;
	/* Stretches the page to 100% height. */
	min-height: 100vh;
	/* Prevents horizontal overflow. */
	max-width: 100%;
}

.rrui__slideshow {
	z-index: var(--slideshow-z-index);
}

.thread__comment,
.settings-page .content-section {
	@mixin upto-s {
		border-radius: 0;
	}
}

.board-page__title {
	margin-left: var(--unit);
	margin-right: var(--unit);
}

.rrui__slideshow--fullscreen {
	z-index: var(--slideshow-z-index);
}

.page__heading,
.page__heading-text,
.rrui__modal__title {
	line-height: 1.35em;
	font-size: 1.3rem;
	font-weight: 400;

	@mixin l-plus {
		line-height: 1.4em;
		font-size: 1.4rem;
	}
}

.page__heading-text {
	margin: 0;
}

.page__heading {
	margin-top: var(--unit);
	margin-bottom: var(--unit);
	margin-left: var(--unit);
	margin-right: var(--unit);
	/*min-height: calc(var(--unit) * 3);*/
	text-align: center;
}

@mixin m-plus {
	.text-content {
	  width: 100%;
		max-width: 50em;
	}
	.webpage__main--content-sections .text-content {
		max-width: 53em;
	}
}

.content {
	padding-left: calc(var(--unit) * 2);
	padding-right: calc(var(--unit) * 2);

	/* Prevents horizontal overflow of a page. */
	width: 100%;

	@mixin xxs {
		padding-left: var(--unit);
		padding-right: var(--unit);
	}
}

.webpage__main--content-sections {
	.content {
		padding-left: calc(var(--unit) * 2);
		padding-right: calc(var(--unit) * 2);
	}
	.background-content {
		padding-left: 0;
		padding-right: 0;
	}
}

@mixin upto-m {
	.webpage__main--content-sections {
		.content {
			padding-left: 0;
			padding-right: 0;
		}
		.background-content {
			padding-left: var(--unit);
			padding-right: var(--unit);
		}
		/*
		If comments don't have any side padding
		then the root replies branch line would be ineligible
		because it would be drawn at the very screen edge.
		This CSS class can be used for styling such special case.
		*/
		.comment-tree {
			--comment-tree-root-level-replies-branch-width-factor: 0.75;
		}
	}
}

@mixin upto-m {
	.sidebar {
		display: none;
		position: fixed;
		left: 0;
		top: 0;
		right: 0;
		bottom: var(--footer-menu-height);
		z-index: var(--sidebar-z-index);
	}
	.sidebar--show {
		display: block;
	}
	/* The extra specificity is to override .home-page__show-boards-list { display: none }. */
	.home-page {
		.home-page__show-boards-list {
			display: block !important;
		}
	}
}

@mixin l-plus {
	body {
		--header-height: calc(var(--unit) * 3);
		--footer-menu-height: 0px;
		--sidebar-max-width: calc(var(--unit) * 26);
	}

	.webpage__header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		height: var(--header-height);
		min-height: var(--header-height);
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		z-index: 1;
		/*position: sticky;*/
		/*bottom: 0;*/
	}

	.sidebar {
		display: block;
		position: sticky;
		/*top: 0;*/
		top: var(--header-height);
		width: 22%;
		max-width: calc(var(--unit) * 26);
		min-height: calc(100vh - var(--header-height));
		max-height: calc(100vh - var(--header-height));
	}

	.board-page__title {
		margin-left: 0;
		margin-right: 0;
	}

	.footer .application-menu {
		display: none;
	}

	/* Move notifications to the right side
	   because they aren't that eligible when shown
	   above the sidebar with the boards list. */
	.rrui__snackbar__container {
		justify-content: flex-end;
	}
}